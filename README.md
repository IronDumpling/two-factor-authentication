#Chuyue Zhang, 1005728303, zhangchuyue.zhang@mail.utoronto.ca

#Da Ma, 1006353474, da.ma@mail.utoronto.ca

# Part 1
## Part 1.1
The URI and QR code generation was achieved by the file generateQRcode.c. It generates a QR code for a TOTP authentication URI, which 
takes three command-line arguments: issuer, account name, and a secret. Leaving the account name and issuer (they can be encoded using 
built-in functions), we first convert each char type character into decimal numbers, and then take every adjacent pairs of numbers and 
make them byte-wise (Initially, each hex character represents 4 binary bits, so we compose each adjacent 2 of them to make it 8 bits).
Finally, we constructs a `otpauth://` URI with these components. The URI includes the account name, issuer, the base32-encoded secret, 
and a period parameter set to 30 seconds. Finally, the program displays a QR code for this URI, which can be scanned by TOTP applications 
to set up two-factor authentication.

## Part 1.2
File validateQRcode.c validates Time-based One-Time Passwords (TOTP) as defined in RFC 6238, using a SHA-1 based HMAC process. The program 
requires two inputs: a secret key in hexadecimal format and the TOTP to validate, outputting whether the provided TOTP is valid based on 
the secret key.It converts a given secret key from hexadecimal to binary, computes the HMAC value with a time-step counter, and compares 
the resulting TOTP with a user-provided value.

To be more specifically, the program decodes the provided hexadecimal secret into binary form. This binary secret is then used with HMAC-SHA1, 
combining it with a time-step value that changes every 30 seconds to ensure time-sensitivity of the generated OTP. This double hashing process 
creates a secure HMAC value. The program then selects a portion of this HMAC output using a dynamic truncation method, which involves taking the 
last 4 bits of the HMAC as an offset, then using this offset to select a 4-byte slice of the HMAC. This slice is then reduced to a 31-bit integer 
by zero'ing the most significant bit (to avoid sign extension issues) and finally, the TOTP is generated by taking this integer modulo 10^CODE_LEN. 
This TOTP is compared to the user's input to validate the authenticity of the TOTP entry.

# Part 2
## Part 2.1
Follow the instructions on the handout, I first run setup the venv of Python3 using setup.sh. Then I ran the mobile_mfa.py to see the QR Code and move to the next part.

## Part 2.2
To make the simulated login successful, the script must first create a new account, and a authenticator. The script needs to check the authenticator status.
During this process, the user needs to use BioConnect to scan the QR Code and enroll at least one of the Bio information. Then the user needs to 
fill in the simulated user name and password. The script then needs to send a POST verification request and get the verification status every second. 
During the waiting time, the status would be "pending". Thus the BioConnect would send a Verification request to the user. After the user verifies it, 
the verification status becomes "success".
